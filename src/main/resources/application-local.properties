# ============================================
# CONFIGURAÇÕES LOCAIS (EMULADORES)
# ============================================

# TABLE STORAGE - Azurite Local (substitui Cosmos DB)
# Azurite já está configurado no docker-compose.yml (porta 10002)
# Use variável de ambiente ou UseDevelopmentStorage=true para Azurite local
# Para Azurite, você pode usar: UseDevelopmentStorage=true
# Ou configurar via variável de ambiente: AZURE_STORAGE_CONNECTION_STRING
azure.storage.connection-string=${AZURE_STORAGE_CONNECTION_STRING:UseDevelopmentStorage=true}
azure.table.table-name=feedbacks


# MAILTRAP - Configuração Local (para testes, pode deixar vazio - apenas loga)
# Configure as variáveis de ambiente (OBRIGATÓRIAS):
# - MAILTRAP_API_TOKEN: Token da API do Mailtrap
# - ADMIN_EMAIL: Email do administrador para receber notificações
# - MAILTRAP_INBOX_ID: ID da inbox do Mailtrap
mailtrap.api-token=${MAILTRAP_API_TOKEN:}
admin.email=${ADMIN_EMAIL:}
mailtrap.inbox-id=${MAILTRAP_INBOX_ID:}

# BLOB STORAGE - Azurite Local
# Use variável de ambiente ou UseDevelopmentStorage=true para Azurite local
azure.blob.connection-string=${AZURE_STORAGE_CONNECTION_STRING:UseDevelopmentStorage=true}
azure.storage.container-name=weekly-reports

# Desabilitar Dev Services (não queremos PostgreSQL)
quarkus.devservices.enabled=false


# ============================================
# AZURE FUNCTIONS LOCAL
# ============================================
AzureWebJobsStorage=UseDevelopmentStorage=true
FUNCTIONS_WORKER_RUNTIME=java
FUNCTIONS_EXTENSION_VERSION=~4

# ============================================
# CONFIGURAÇÕES PARA DESENVOLVIMENTO
# ============================================
quarkus.log.level=DEBUG
app.environment=local
app.debug=true

# Table Storage não precisa de SSL verification (usa HTTP no emulador)

# Configurações de teste
feedback.critical.threshold=3

# Configuração de agendamento do relatório semanal
# IMPORTANTE: Para Azure Functions TimerTrigger, configure também a variável REPORT_SCHEDULE_CRON no local.settings.json
# Esta propriedade é para referência/documentação. O Azure Functions lê diretamente do local.settings.json
# Formato CRON: segundo minuto hora dia mês dia-semana
# Exemplo: 0 */5 * * * * = a cada 5 minutos (para testes e visualização rápida)
report.schedule.cron=0 */5 * * * *  # A cada 5 minutos para testes
# Porta para Azure Functions (local)
quarkus.http.port=7071
quarkus.http.root-path=/

# Configuração do Quarkus (apenas para REST endpoints)
# As Azure Functions (Queue/Timer Triggers) não usam Quarkus CDI
quarkus.arc.remove-unused-beans=false

# Configuração Quarkus REST (endpoint REST para desenvolvimento local)
# O endpoint REST estará disponível em /avaliacao (sem prefixo /api)
quarkus.rest.path=/

# Health Check Configuration (opcional - endpoints padrão: /q/health, /q/health/live, /q/health/ready)
# Configurado para usar /health ao invés de /q/health
quarkus.smallrye-health.root-path=/health