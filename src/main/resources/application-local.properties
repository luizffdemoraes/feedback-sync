# ============================================
# CONFIGURA��ES LOCAIS (EMULADORES)
# ============================================

# TABLE STORAGE - Azurite Local (substitui Cosmos DB)
# Azurite já está configurado no docker-compose.yml (porta 10002)
# Use variável de ambiente ou UseDevelopmentStorage=true para Azurite local
# Para Azurite, você pode usar: UseDevelopmentStorage=true
# Ou configurar via variável de ambiente: AZURE_STORAGE_CONNECTION_STRING
azure.storage.connection-string=${AZURE_STORAGE_CONNECTION_STRING:UseDevelopmentStorage=true}
azure.table.table-name=feedbacks


# MAILTRAP - Configuração Local (para testes, pode deixar vazio - apenas loga)
# Configure as variáveis de ambiente (OBRIGATÓRIAS):
# - MAILTRAP_API_TOKEN: Token da API do Mailtrap
# - ADMIN_EMAIL: Email do administrador para receber notificações
mailtrap.api-token=${MAILTRAP_API_TOKEN:}
admin.email=${ADMIN_EMAIL:}

# BLOB STORAGE - Azurite Local
# Use variável de ambiente ou UseDevelopmentStorage=true para Azurite local
azure.blob.connection-string=${AZURE_STORAGE_CONNECTION_STRING:UseDevelopmentStorage=true}
azure.storage.container-name=weekly-reports

# Desabilitar Dev Services (n�o queremos PostgreSQL)
quarkus.devservices.enabled=false


# ============================================
# AZURE FUNCTIONS LOCAL
# ============================================
AzureWebJobsStorage=UseDevelopmentStorage=true
FUNCTIONS_WORKER_RUNTIME=java
FUNCTIONS_EXTENSION_VERSION=~4

# ============================================
# CONFIGURA��ES PARA DESENVOLVIMENTO
# ============================================
quarkus.log.level=DEBUG
app.environment=local
app.debug=true

# Table Storage não precisa de SSL verification (usa HTTP no emulador)

# Configura��es de teste
feedback.critical.threshold=3
report.schedule.cron=0 */5 * * * *  # A cada 5 minutos para testes
# Porta para Azure Functions (local)
quarkus.http.port=7071
quarkus.http.root-path=/

# Configuração do Quarkus Azure Functions
quarkus.arc.remove-unused-beans=false
quarkus.arc.exclude-types=
quarkus.arc.unremovable-types=br.com.fiap.postech.feedback.infrastructure.handlers.WeeklyReportFunction,br.com.fiap.postech.feedback.infrastructure.handlers.NotifyAdminFunction

# Configuração Quarkus REST (endpoint REST para desenvolvimento local)
# O endpoint REST estará disponível em /avaliacao (sem prefixo /api)
quarkus.rest.path=/

# Health Check Configuration (opcional - endpoints padrão: /q/health, /q/health/live, /q/health/ready)
# Configurado para usar /health ao invés de /q/health
quarkus.smallrye-health.root-path=/health